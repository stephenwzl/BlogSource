---
title: Dartçš„å˜é‡å’Œç±»å‹
date: 2018-04-21 12:11:01
tags:
---
åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](/2018/04/20/dart-getting-start/)ä¸­æˆ‘ä»¬ç®€å•åœ°ä»‹ç»å’Œè®¤è¯†äº† Dartè¯­è¨€ã€‚  

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°æ¥è®¤è¯†ä¸€ä¸‹ Dartç¼–ç¨‹è¯­è¨€ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼šå˜é‡å’Œç±»å‹ã€‚

<!--more-->

# å˜é‡
åœ¨ä¸Šæ–‡ä¸­å·²ç»çŸ¥é“ï¼Œå®šä¹‰å˜é‡çš„è¯­æ³•å¾ˆç®€å•ï¼Œæ¯”å¦‚ï¼š

```dart
var name = 'Bob';
int line = 0;               // å®šä¹‰ intç±»å‹
String foo = 'Bar';         // å®šä¹‰ String ç±»å‹
List counts = [1, 2, 3];    // å®šä¹‰ List ç±»å‹
```

> åœ¨ Dartä¸­ï¼Œå˜é‡éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥ Dartæ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„è¯­è¨€ã€‚

Dart æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œæ‰€ä»¥å½“ä½ ä½¿ç”¨ `var`å…³é”®å­—å®šä¹‰å˜é‡æ—¶ï¼Œæœ¬è´¨å…¶å®å°±æ˜¯å…·ä½“ç±»å‹çš„å¼•ç”¨ã€‚æ¯”å¦‚ä¸Šæ–‡ä»£ç å…¶å®å°±æ˜¯ä¸€ä¸ª `String`ç±»å‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè¿™ä¸ªå¯¹è±¡çš„å†…å®¹æ˜¯ 'Bob'

## æœªåˆå§‹åŒ–å˜é‡
æœªåˆå§‹åŒ–çš„å˜é‡å®ƒçš„å€¼éƒ½æ˜¯ nullï¼Œåœ¨ Dartä¸­è¿™ä¸€ç‚¹å¾ˆå«äººæ”¾å¿ƒã€‚

```dart
int lineCount;
assert(lineCount == null);
```

## ç±»å‹å¯é€‰
å½“ä½ ä½¿ç”¨ `var`å®šä¹‰å˜é‡æ—¶ï¼Œè¡¨ç¤ºç±»å‹æ˜¯ç¼–è¯‘å™¨æ¨æ–­å†³å®šçš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨é™æ€ç±»å‹å»å®šä¹‰å˜é‡ã€‚  
ç”¨é™æ€ç±»å‹å»å®šä¹‰å˜é‡çš„å¥½å¤„æ˜¯ä½ å¯ä»¥æ›´æ¸…æ¥šåœ°è·Ÿç¼–è¯‘å™¨è¡¨è¾¾ä½ çš„æ„å›¾ï¼Œè¿™æ ·ç¼–è¯‘å™¨å’Œç¼–è¾‘å™¨å°±èƒ½ä½¿ç”¨è¿™äº›ç±»å‹å‘ä½ æä¾› warningæˆ–è€…ä»£ç è¡¥å…¨è¿™äº›åŠŸèƒ½ã€‚

ä¸è¿‡åœ¨ Dart2ä¸­ï¼Œç±»å‹ä¸å†æ˜¯å¯é€‰çš„ã€‚æ„æ€æ˜¯å½“ä½ ä½¿ç”¨ `var`å®šä¹‰ nameå˜é‡æ—¶ï¼Œè¿™ä¸ªç±»å‹ä¾¿ä¼šçº¦æŸåœ¨ Stringç±»å‹ï¼Œå¦‚æœèµ‹å€¼å…¶ä»–ç±»å‹ä¾¿ä¼šå‡ºé”™ã€‚å¦‚æœä½ ä¸æƒ³çº¦æŸä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `Object`ç±»å‹å®šä¹‰æˆ–è€… `dynamic`å…³é”®å­—å®šä¹‰ã€‚  

## final å’Œ const
å¦‚æœä½ æƒ³å®šä¹‰ä¸å¯å˜çš„å˜é‡ï¼Œé‚£ä¹ˆåœ¨å®šä¹‰å‰åŠ ä¸Š `final`æˆ–è€… `const`å…³é”®å­—ã€‚  

```dart
final nickname = 'ccc';
const int count = 3;
const List list = const [];
```


`const`è¡¨ç¤ºå˜é‡åœ¨ç¼–è¯‘æœŸé—´å³èƒ½ç¡®å®šå€¼ï¼Œå¦‚æœè¿™ä¸ªå˜é‡æ˜¯ `class`å†…çš„ï¼Œå°±ç”¨ `static const`æ ‡è®°ã€‚ä½¿ç”¨`const`æ ‡è®°å˜é‡æ—¶ï¼Œä½ éœ€è¦åœ¨å£°æ˜çš„æ—¶å€™å°±ç»™å®šå…¶å€¼ã€‚

`final`æœ‰äº›ä¸å¤ªä¸€æ ·ï¼Œç”¨å®ƒæ ‡è®°çš„å˜é‡å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œæ¯”å¦‚ï¼š

```
var x = 100;          // è¿è¡Œæ—¶å˜é‡ï¼Œå¯ä»¥æ˜¯ä»»æ„å…¶ä»–å€¼
var y = 30;           // è¿è¡Œæ—¶å˜é‡ï¼Œå¯ä»¥æ˜¯ä»»æ„å…¶ä»–å€¼

final res = x / y;
```
`final` å…¶å®å°±æ˜¯åœ¨è¿è¡Œæ—¶å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨ä¸€æ—¦ç¡®å®šå°±ä¸å¯å†å˜ã€‚


# ç±»å‹
Dart å†…ç½®äº†å¦‚ä¸‹ç±»å‹ï¼š  

* Number
* String
* Boolean
* List
* Map
* Rune
* Symbol

åœ¨ä¸å¼•å…¥å…¶ä»–åº“çš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›ç±»å‹å£°æ˜å˜é‡ã€‚

## Number
Dart çš„ numberç±»å‹å…¶å®åªæœ‰ä¸¤ç§ï¼šint å’Œ double  
int çš„èŒƒå›´æ˜¯ -2^53 ~ 2^53  
double æ˜¯ç¬¦åˆ IEEE 754æ ‡å‡†çš„ 64ä½åŒç²¾åº¦çš„æµ®ç‚¹æ•°ã€‚  

`int`å’Œ `double`éƒ½æ˜¯ `num` çš„å­ç±»å‹ã€‚é™¤äº†å¸¸è§çš„è¿ç®—ç¬¦å¤–ï¼Œä½ è¿˜èƒ½ä½¿ç”¨å†…ç½®çš„ `abs()`ã€`ceil()`ã€`floor()`ç­‰æ–¹æ³•ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–è¿ç®—æ–¹æ³•çš„éœ€æ±‚ï¼Œä½ å¯ä»¥å¼•å…¥ `dart:math`åº“æ¥å°è¯•ç”¨ä¸€ä¸‹ã€‚  

## String
Dartçš„ Stringå…¶å®ç”± UTF-16çš„ä»£ç ä¸²ç»„æˆã€‚å’Œ JavaScriptä¸€æ ·ï¼Œä½ æ—¢èƒ½ä½¿ç”¨å•å¼•å·ä¹Ÿèƒ½ä½¿ç”¨åŒå¼•å·æ¥å†™å­—ç¬¦ä¸²çš„å­—é¢é‡  

```dart
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s3 = 'It\'s easy to escape the string delimiter.';
var s4 = "It's even easier to use the other delimiter.";
```

ä½ è¿˜èƒ½åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ï¼Œé™¤äº† Stringç±»å‹çš„å˜é‡å¤–ï¼ŒDartå¯¹å­—ç¬¦ä¸²ä¸­åµŒå…¥çš„å¯¹è±¡ä¼šé»˜è®¤è°ƒç”¨å®ƒçš„ `toString()`æ–¹æ³•ï¼š

```dart
var s = 'string interpolation';
var s1 = 'this is uppercased string: ${s.toUpperCase()}'
```

å­—ç¬¦ä¸²çš„æ‹¼æ¥ç›´æ¥ä½¿ç”¨ `+`è¿ç®—ç¬¦ï¼Œè¿™ä¸ªå°±ä¸å¤šæäº†ã€‚  
å€¼å¾—ä¸€æçš„æ˜¯å£°æ˜å¤šè¡Œå­—ç¬¦ä¸²æ—¶ï¼Œä½ å¯ä»¥ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–ä¸‰ä¸ªåŒå¼•å·ï¼Œè¿™æœ‰ç‚¹åƒ Pythonï¼š

```dart
var s1 = '''
You can create
multi-line strings like this one.
''';

var s2 = """This is also a
multi-line string.""";
```

## Rune
æåˆ° Stringï¼Œä¸å¾—ä¸æä¸€ä¸‹ Runeï¼ŒRuneå…¶å®å°±æ˜¯ Dartä¸­çš„ UTF-32çš„å­—ç¬¦ä¸²ã€‚  
å› ä¸º Unicodeç»™æ¯ä¸ªå•è¯ã€å­—ç¬¦æˆ–è€…ç¬¦å·éƒ½å®šä¹‰äº†ç‰¹æ®Šçš„æ•°å­—å€¼ï¼Œæ‰€ä»¥è¦æ‹¿ Stringå»è¡¨ç¤º 32ä½çš„ Unicodeä¼šæ¯”è¾ƒå›°éš¾ã€‚  
é€šå¸¸åœ°ï¼Œä¸€ä¸ª Unicodeç çš„å½¢å¼æ˜¯ \uXXXXï¼Œè¿™ä¸ª XXXXè¡¨ç¤º 4ä½é•¿åº¦çš„åå…­è¿›åˆ¶æ•°ã€‚æ¯”å¦‚å­—ç¬¦ï¼ˆâ™¥ï¼‰çš„ Unicodeç æ˜¯ `\u2665`,ä½†å¦‚æœè¦è¡¨ç¤ºçš„ç è¶…è¿‡æˆ–è€…å°‘äº 4ä½ï¼Œå°±è¦ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ï¼Œæ¯”å¦‚ ğŸ˜† å°±æ˜¯ `\u{1f600}`.  

Runeå…¶å®å°±æ˜¯å¸®åŠ© Stringæ¥è¡¨ç¤º 32ä½ Unicodeçš„ã€‚æ¯”å¦‚ä¸‹ä¾‹ï¼š

```dart
main() {
  var clapping = '\u{1f44f}';
  print(clapping);
  print(clapping.codeUnits);
  print(clapping.runes.toList());

  Runes input = new Runes(
      '\u2665  \u{1f605}  \u{1f60e}  \u{1f47b}  \u{1f596}  \u{1f44d}');
  print(new String.fromCharCodes(input));
}
```

è¾“å‡ºæ˜¯ï¼š

```
ğŸ‘
[55357, 56399]
[128079]
â™¥  ğŸ˜…  ğŸ˜  ğŸ‘»  ğŸ––  ğŸ‘
```

å¾ˆæ¸…æ¥šå¯ä»¥çœ‹åˆ°ï¼ŒStringçš„ `codeUnits`å‡½æ•°åªèƒ½è¿”å› 16ä½çš„ç ï¼Œä½†`Rune`å°±å¯ä»¥è¡¨ç¤º 32ä½ã€‚

## Boolean
Dart çš„ bool ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼š true å’Œ false  
å’Œå…¶ä»–è¯­è¨€ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯ï¼Œå½“æ‰§è¡Œåˆ¤æ–­æ—¶ï¼ŒDartä¸­åªæœ‰ trueæ‰ä¼šåˆ¤å®šçœŸï¼Œå…¶ä»–ä»»ä½•å€¼éƒ½ä¸º false  

```dart
var name = 'Bob';
if (name) {
  // åœ¨ Dartä¸­ä¸ä¼šæ‰§è¡Œåˆ°è¿™å„¿
  print('You have a name!');
}
```

## List
ä½ ä¹Ÿå¯ä»¥ç®¡ Listå« Arrayï¼Œä½† Dartä¸­æ•°ç»„å°±å« Listäº†ã€‚

```dart
var list = [1, 2, 3];
```

Dartçš„ Listå…¶å®æ˜¯æœ‰ç±»å‹çš„ï¼Œæ¯”å¦‚ä¸Šè¿°ä»£ç çš„ç±»å‹å°±æ˜¯ `List<int>`, æ‰€ä»¥ä½ å¾€è¿™é‡Œé¢æ·»åŠ å…ƒç´ å¿…é¡»æ˜¯ intç±»å‹çš„ã€‚  

å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œæ•°ç»„ç´¢å¼•ä¹Ÿä» 0å¼€å§‹ã€‚åŒæ ·åœ°ï¼Œä½ è¿˜å¯ä»¥åƒ JavaScripté‚£æ ·è¿­ä»£æ•°ç»„ï¼š

```dart
list.forEach((item) {
  print('index: ${list.indexOf(item)}, item:${item}');
});
```

é™¤äº†ä¸€äº›åŸºæœ¬çš„å‡½æ•°å¤–ï¼ŒDartå…¶å®è¿˜æœ‰å¾ˆå¤šæ–¹æ³•æ¥æ“ä½œé›†åˆç±»å‹ï¼Œå…·ä½“çš„å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼š[Collections in Dart](https://v1-dartlang-org.firebaseapp.com/guides/libraries/library-tour#collections)

## Map
Mapç±»å‹åœ¨å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå«åšå­—å…¸ï¼Œå³ key-valueçš„é›†åˆã€‚åœ¨ Dartä¸­å£°æ˜ Mapä¹Ÿå¾ˆç®€å•ï¼š

```dart
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
};

// æˆ–è€…

var gifts = new Map();
gifts['first'] = 'partridge';
gifts['second'] = 'turtledoves';
gifts['fifth'] = 'golden rings';

```
åŒæ ·åœ°ï¼ŒMapä¹Ÿæœ‰ç±»å‹ï¼Œä¸Šè¿°ä»£ç å³ Map<String, String>ç±»å‹ã€‚ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶ä¸ä¼šæŒ‰ç…§æ—¢å®šçš„æ³›å‹ä½¿ç”¨ Mapï¼Œå¦‚æœä½ ä»”ç»†é˜…è¯»äº†ä¸Šæ–‡ï¼Œä½ ä¼šå‘ç°è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚  
å…³äº Mapçš„æ“ä½œæ–¹æ³•ä½ ä¹Ÿå¯ä»¥å‚è€ƒ [Collections in Dart](https://v1-dartlang-org.firebaseapp.com/guides/libraries/library-tour#collections)

## Symbol

symboæ˜¯ Dartä¸­æ¯”è¾ƒç‰¹æ®Šçš„ä¸€ç§ç±»å‹ï¼Œä½ ä¸€èˆ¬ä¸ä¼šç”¨åˆ°å®ƒï¼Œä½†å¦‚æœä½ éœ€è¦è·å–æ ‡è¯†ç¬¦çš„å­—é¢é‡æ—¶ï¼Œè¿™ä¸ªä½œç”¨å°±æ— æ³•ä¼°é‡äº†ã€‚

```dart
var name = 'a';
Symbol s = #name;
```

æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ²¡ä»€ä¹ˆä½œç”¨ï¼Œä¸è¿‡è¿™ä¸ªä¸œè¥¿çš„é«˜çº§ç”¨æ³•æˆ‘ä»¬ä»¥åä¼šæåˆ°ã€‚


# The End
é€šè¿‡å˜é‡å’Œç±»å‹çš„äº†è§£å¯ä»¥è®¤è¯†åˆ°ï¼š

* åœ¨ Dartä¸­ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯å¯¹è±¡ï¼Œè€Œæ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç±»çš„å®ä¾‹ï¼Œnullä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€æœ‰çš„ç±»éƒ½ä» `Object`ç»§æ‰¿è€Œæ¥
* å°½é‡ä¸è¦å·æ‡’ï¼Œä¸ºå˜é‡æŒ‡å®šç±»å‹ï¼Œè¿™æ ·ç¼–è¯‘å™¨å’Œç¼–è¾‘å™¨éƒ½èƒ½æ›´å¥½åœ°å¸®åŠ©ä½ å†™çš„ä»£ç ã€‚
